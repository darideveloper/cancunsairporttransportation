---
import { ui } from "../lib/i18n/ui";
// Import all page components
import Home from "../components/pages/Home.astro";
import Taxi from "../components/pages/Taxi.astro";
import Akumal from "../components/pages/Akumal.astro";
import Tulum from "../components/pages/Tulum.astro";
import Destinations from "../components/pages/Destinations.astro";
import Group from "../components/pages/Group.astro";
import Luxury from "../components/pages/Luxury.astro";
import Private from "../components/pages/Private.astro";
import Playa from "../components/pages/Playa.astro";
import Merida from "../components/pages/Merida.astro";
import Terms from "../components/pages/Terms.astro";

export async function getStaticPaths() {
  const paths = [];

  // English Routes
  if (ui.en && ui.en.routes) {
    const enRoutes = ui.en.routes;
    for (const [key, path] of Object.entries(enRoutes)) {
      paths.push({
        params: { path: path === "" ? undefined : path },
        props: { pageKey: key, lang: "en" },
      });
    }
  }

  // Spanish Routes
  if (ui.es && ui.es.routes) {
    const esRoutes = ui.es.routes;
    for (const [key, path] of Object.entries(esRoutes)) {
      paths.push({
        params: { path: path },
        props: { pageKey: key, lang: "es" },
      });
    }
  }

  return paths;
}

interface Props {
  pageKey: string;
  lang: "en" | "es";
}
const { pageKey, lang } = Astro.props;

const COMPONENT_MAP = {
  home: Home,
  taxi: Taxi,
  akumal: Akumal,
  tulum: Tulum,
  destinations: Destinations,
  group: Group,
  luxury: Luxury,
  private: Private,
  playa: Playa,
  merida: Merida,
  terms: Terms,
};

const PageComponent = COMPONENT_MAP[pageKey as keyof typeof COMPONENT_MAP];
---

{PageComponent && <PageComponent lang={lang} pageKey={pageKey} />}
