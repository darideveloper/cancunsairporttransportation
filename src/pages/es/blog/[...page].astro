---
import BlogListing from "../../../components/pages/blog/BlogListing.astro";
import { getPosts } from "../../../lib/blog/api";

export async function getStaticPaths({ paginate }: any) {
  const posts = await getPosts("es");
  const sortedPosts = posts.sort(
    (a, b) =>
      new Date(b.created_at).getTime() - new Date(a.created_at).getTime(),
  );

  return paginate(sortedPosts, { pageSize: 9 });
}

const { page } = Astro.props;
---

<BlogListing
  posts={page.data}
  lang="es"
  currentPage={page.currentPage}
  lastPage={page.lastPage}
  prevUrl={page.url.prev}
  nextUrl={page.url.next}
/>
