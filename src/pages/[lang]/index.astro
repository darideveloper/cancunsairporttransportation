---
// Layout
import Layout from '../../layouts/Layout.astro'

// Libs
import { useTranslations } from '../../lib/i18n/utils'
import { getStaticPathsLangs } from '../../lib/utils'
import { marked } from 'marked'

// i18n
export const getStaticPaths = getStaticPathsLangs

// Components
import PageSEO from '../../components/utils/PageSEO.astro'
import BannerImage from '../../components/atoms/BannerImage.astro'
import BookingForm from '../../components/organisms/BookingForm.astro'
import TextCard from '../../components/molecules/TextCard.astro'
import BannerCta from '../../components/organisms/BannerCta.astro'
import BannerStats from '../../components/organisms/BannerStats.astro'
import PricingCard from '../../components/molecules/PricingCard.astro'
import { Image } from 'astro:assets'

// Images
const bannerSrc = '/images/home-banner.webp'
import safeTripBookingImg from '../../assets/images/trip-advisor.webp'
import luxuryVehicleImg from '../../assets/images/vehicles/luxury.webp'
import privateVehicleImg from '../../assets/images/vehicles/standard.webp'
import groupVehicleImg from '../../assets/images/vehicles/groups.webp'

// Props
interface Props {
  lang: string
}
// Get language from params or props
const { lang } = (Astro.params as any) || (Astro.props as any)

// Tranlation texts
const t = useTranslations(lang)
const safeTripBookContent = await marked.parse(t('safeTripBooking.text'))

// Data
const pricingTransportation = [
  {
    key: 'luxury',
    image: luxuryVehicleImg,
    bestSeller: false,
  },
  {
    key: 'private',
    image: privateVehicleImg,
    bestSeller: true,
  },
  {
    key: 'group',
    image: groupVehicleImg,
    bestSeller: false,
  },
]
---

<Layout>
  <PageSEO
    currentPage='home'
    lang={lang}
    slot='seo'
  />
  <BannerImage src={bannerSrc}>
    <h1 class='mx-auto w-11/12 text-5xl font-bold'>
      {t('pages.home.bannerTitle')}
    </h1>
  </BannerImage>
  <BookingForm
    defaultFrom='cun'
    defaultTo='merida'
    class='-mt-28'
  />
  <TextCard
    id='safe-trip-booking'
    title={t('safeTripBooking.title')}
    image={safeTripBookingImg}
    alt={t('safeTripBooking.imageAlt')}
    width={700}
    height={400}
    class='mt-12'
    classImage='object-right'
    reverse={true}
  >
    <div
      set:html={safeTripBookContent}
      class='markdown'
    />
  </TextCard>

  <!-- Banner CTA -->
  <BannerCta
    title={t('cancunAirportTransportation.title')}
    text={t('cancunAirportTransportation.text')}
    lang={lang}
  />

  <!-- Pricing transportation -->
  <section
    id='pricing-transportation'
    class='container'
  >
    <div>
      <h2>
        {t('pricingTransportation.title')}
      </h2>
      <p>
        {t('pricingTransportation.text')}
      </p>
    </div>

    <ul
      class='mt-12 grid grid-cols-1 items-end justify-center gap-8 md:grid-cols-3 md:flex-row'
    >
      {
        pricingTransportation.map((card) => (
          <li>
            <PricingCard
              title={t(`pricingTransportation.cards.${card.key}.title`)}
              price={t(`pricingTransportation.cards.${card.key}.price`)}
              ctaLink='#'
              ctaText={t(`pricingTransportation.cards.${card.key}.ctaText`)}
              bestSeller={card.bestSeller}
              currency={lang === 'es' ? 'mxn' : 'usd'}
            >
              <Image
                slot='image'
                src={card.image}
                alt={t(`pricingTransportation.cards.${card.key}.imageAlt`)}
                title={t(`pricingTransportation.cards.${card.key}.imageTitle`)}
                loading='lazy'
                class='mx-auto w-9/12'
              />
              <div
                slot='content'
                set:html={marked.parse(
                  t(`pricingTransportation.cards.${card.key}.description`)
                )}
                class='markdown'
              />
            </PricingCard>
          </li>
        ))
      }
    </ul>
  </section>

  <BannerStats />
</Layout>
