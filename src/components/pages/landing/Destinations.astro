---
// Layout
import Layout from "../../../layouts/Layout.astro";

// Libs
import { useTranslations } from "../../../lib/i18n/utils";
import { getStaticPathsLangs } from "../../../lib/utils";
import { marked } from "marked";

// i18n
// export const getStaticPaths = getStaticPathsLangs;

// Components
import { Image } from "astro:assets";
import PageSEO from "../../../components/utils/PageSEO.astro";
import BookingForm from "../../../components/organisms/BookingForm";
import SectionHeading from "../../../components/molecules/SectionHeading.astro";
import PricingCard from "../../../components/molecules/PricingCard.astro";
import BasicImageCard from "../../../components/molecules/BasicImageCard.astro";
import Testimonials from "../../../components/organisms/Testimonials.astro";
import CheckListItem from "../../../components/atoms/CheckListItem.astro";

// Images
import tulumImg from "../../../assets/images/destinations/tulum.webp";
import playaImg from "../../../assets/images/destinations/playa-del-carmen.webp";
import cancunImg from "../../../assets/images/destinations/cancun.webp";
import bookNowImg from "../../../assets/images/destinations/book-now.png";
import customerServiceImg from "../../../assets/images/destinations/customer-service.png";
import pyramidImg from "../../../assets/images/destinations/pyramid.png";
import excursionImg from "../../../assets/images/destinations/excursion.png";
import carSeatImg from "../../../assets/images/destinations/car-seat.png";
import homeBannerImg from "../../../assets/images/home-banner.webp";
import destinationsClient1Img from "../../../assets/images/clients/destinations-client-1.webp";
import destinationsClient2Img from "../../../assets/images/clients/destinations-client-2.webp";

// Page data
const page = "destinations";

// Props
interface Props {
  lang: "en" | "es";
  pageKey: string;
}
// Get language from params or props
const { lang, pageKey } = Astro.props;

// Tranlation texts
const t = useTranslations(lang);

// Data
const destinations = [
  {
    id: "tulum",
    image: tulumImg,
  },
  {
    id: "playa",
    image: playaImg,
  },
  {
    id: "cancun",
    image: cancunImg,
  },
];
---

<Layout preloadImage={homeBannerImg.src} pageKey={pageKey}>
  <!-- Page SEO -->
  <PageSEO currentPage={page} slot="seo" />

  <section class="container flex flex-col-reverse gap-6 md:flex-row md:gap-4">
    <!-- Content -->
    <div class="content md:w-1/2 lg:w-2/3">
      <!-- Heading -->
      <div class="">
        <p class="mb-4">
          {t("pages.destinations.tagline")}
        </p>
        <SectionHeading title={t("pages.destinations.title")} isH1>
          <div
            class=""
            set:html={marked.parse(t("pages.destinations.description"))}
          />
        </SectionHeading>
      </div>

      <BasicImageCard
        title={t(`global.sections.highlights.reserve.title`)}
        image={{
          src: bookNowImg,
          alt: t(`global.sections.highlights.reserve.imageAlt`),
          title: t(`global.sections.highlights.reserve.imageTitle`),
        }}
        class="mt-6"
      >
        <div
          set:html={marked.parse(t(`pages.${page}.highlights.reserve.text`))}
          class=""
        />
      </BasicImageCard>

      <!-- Destinations -->
      <ul class="mt-6 grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3">
        {
          destinations.map((dest) => (
            <li>
              <PricingCard
                title={t(`pages.${page}.destinations.cards.${dest.id}.title`)}
                price={t(`pages.${page}.destinations.cards.${dest.id}.price`)}
                ctaLink={t(`pages.${page}.destinations.cards.${dest.id}.link`)}
                ctaText={t(
                  `pages.${page}.destinations.cards.${dest.id}.ctaText`,
                )}
                currency={lang === "es" ? "mxn" : "usd"}
                bestSeller={false}
                reverse={true}
                class=""
              >
                <Image
                  slot="image"
                  src={dest.image}
                  alt={t(`pages.${page}.destinations.cards.${dest.id}.title`)}
                  widths={[300, 600, dest.image.width]}
                  quality={60}
                  format="avif"
                  loading="lazy"
                  decoding="async"
                  class="w-full"
                />
                <div
                  slot="content"
                  set:html={marked.parse(
                    t(
                      `pages.${page}.destinations.cards.${dest.id}.description`,
                    ),
                  )}
                  class=""
                />
              </PricingCard>
            </li>
          ))
        }
      </ul>

      <!-- Highlights -->
      <BasicImageCard
        title={t(`global.sections.highlights.contact.title`)}
        image={{
          src: customerServiceImg,
          alt: t(`global.sections.highlights.contact.imageAlt`),
          title: t(`global.sections.highlights.contact.imageTitle`),
        }}
        class="mt-6"
      >
        <div
          set:html={marked.parse(t(`pages.${page}.highlights.contact.text`))}
          class=""
        />
      </BasicImageCard>

      <!-- Testimonials -->
      <Testimonials
        page="destinations"
        images={[destinationsClient1Img, destinationsClient2Img]}
        class="md:hidden lg:block"
      />
    </div>

    <!-- Sidebar -->
    <aside
      class="@container -mx-6 flex flex-col gap-6 md:mx-0 md:w-1/2 lg:w-1/3"
    >
      <!-- Form -->
      <BookingForm
        translations={t("global.booking")}
        defaultFrom="cun"
        defaultTo="merida"
        client:idle
        className="md:px-0!"
      />

      <BasicImageCard
        title={t(`pages.${page}.serviceCards.confidence.title`)}
        image={{
          src: pyramidImg,
          alt: t(`pages.${page}.serviceCards.confidence.imageAlt`),
          title: t(`pages.${page}.serviceCards.confidence.imageTitle`),
        }}
      >
        <p>{t(`pages.${page}.serviceCards.confidence.text`)}</p>
      </BasicImageCard>

      <ul class="grid grid-cols-2 gap-4 sm:gap-1">
        <CheckListItem
          text={t(`pages.${page}.checklist.affordable`)}
          class="flex justify-center"
        />
        <CheckListItem
          text={t(`pages.${page}.checklist.lowRates`)}
          class="flex justify-center"
        />
      </ul>

      <BasicImageCard
        title={t(`pages.${page}.serviceCards.transportation.title`)}
        image={{
          src: excursionImg,
          alt: t(`pages.${page}.serviceCards.transportation.imageAlt`),
          title: t(`pages.${page}.serviceCards.transportation.imageTitle`),
        }}
      >
        <p>{t(`pages.${page}.serviceCards.transportation.text`)}</p>
      </BasicImageCard>

      <BasicImageCard
        title={t(`pages.${page}.serviceCards.comfort.title`)}
        image={{
          src: carSeatImg,
          alt: t(`pages.${page}.serviceCards.comfort.imageAlt`),
          title: t(`pages.${page}.serviceCards.comfort.imageTitle`),
        }}
      >
        <p>{t(`pages.${page}.serviceCards.comfort.text`)}</p>
      </BasicImageCard>
    </aside>
  </section>
</Layout>
