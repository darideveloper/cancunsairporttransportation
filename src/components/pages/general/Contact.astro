---
// Layout
import Layout from "../../../layouts/Layout.astro";

// Libs
// Libs
import { getTranslations } from "../../../lib/i18n/utils";
import PageSEO from "../../../components/utils/PageSEO.astro";
import SectionHeading from "../../../components/molecules/SectionHeading.astro";
import BasicIconCard from "../../../components/molecules/BasicIconCard.astro";
import {
  FaUser,
  FaEnvelope,
  FaPhone,
  FaRegImage,
  FaComment,
} from "react-icons/fa";
// Atoms
import ContactForm from "../../organisms/ContactForm";
import GoogleMap from "../../atoms/GoogleMap.astro";

// Data
import { PHONES, EMAIL } from "../../../data/site-config";

interface Props {
  lang: "en" | "es";
  pageKey: string;
}

const { lang, pageKey } = Astro.props;
const t = getTranslations(lang);

const contactCards = t("pages.contact.cards");

const contactCardsList = [
  {
    Icon: FaPhone,
    title: contactCards.usa.title,
    text: contactCards.usa.text,
    variant: "white",
    href: PHONES.usa.href,
  },
  {
    Icon: FaPhone,
    title: contactCards.mexico.title,
    text: contactCards.mexico.text,
    variant: "orange",
    href: PHONES.mexico.href,
  },
  {
    Icon: FaEnvelope,
    title: contactCards.email.title,
    text: contactCards.email.text,
    variant: "black",
    href: EMAIL.href,
  },
] as const;
---

<Layout pageKey={pageKey}>
  <PageSEO currentPage="contact" slot="seo" />

  <div class="container">
    <SectionHeading
      title={t("pages.contact.title")}
      isH1
      class="mt-12 text-center"
    >
      <p class="text-lg">
        {t("pages.contact.description")}
      </p>
    </SectionHeading>

    <div
      class="form-wrapper bg-gray-light mt-6 flex flex-col items-center gap-12 rounded-2xl p-8 shadow-sm lg:flex-row"
    >
      <SectionHeading
        title={t("pages.contact.stayInTouch.title")}
        class="w-full lg:w-1/3"
      >
        <p class="text-lg">
          {t("pages.contact.stayInTouch.description")}
        </p>
      </SectionHeading>

      <ContactForm
        client:load
        labels={{
          name: t("pages.contact.form.name.label"),
          email: t("pages.contact.form.email.label"),
          phone: t("pages.contact.form.phone.label"),
          subject: t("pages.contact.form.subject.label"),
          message: t("pages.contact.form.message.label"),
          submit: t("pages.contact.form.submit"),
          submitting: t("pages.contact.form.submitting") || "Sending...",
        }}
        placeholders={{
          name: t("pages.contact.form.name.placeholder"),
          email: t("pages.contact.form.email.placeholder"),
          phone: t("pages.contact.form.phone.placeholder"),
          subject: t("pages.contact.form.subject.placeholder"),
          message: t("pages.contact.form.message.placeholder"),
        }}
        messages={{
          success:
            t("pages.contact.form.success_message") ||
            "We will get back to you as soon as possible.",
          error:
            t("pages.contact.form.error_message") ||
            "Please try again later or contact us directly by phone.",
        }}
      />
    </div>
  </div>

  <section class="container mt-12">
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-3">
      {
        contactCardsList.map((card) => (
          <BasicIconCard
            Icon={card.Icon}
            title={card.title}
            text={card.text}
            variant={card.variant as any}
            href={card.href}
            class="w-full"
          />
        ))
      }
    </div>
  </section>

  <div
    class="border-gray-light container my-12 h-[450px] w-full overflow-hidden rounded-2xl border bg-white shadow-sm"
  >
    <GoogleMap />
  </div>
</Layout>
