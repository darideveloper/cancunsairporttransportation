---
// Layout
import Layout from "../../../layouts/Layout.astro";

// Libs
// Libs
import { useTranslations } from "../../../lib/i18n/utils";
import PageSEO from "../../../components/utils/PageSEO.astro";
import SectionHeading from "../../../components/molecules/SectionHeading.astro";
import BasicIconCard from "../../../components/molecules/BasicIconCard.astro";
import ContactInfoList from "../../../components/molecules/ContactInfoList.astro";
import {
  FaUser,
  FaEnvelope,
  FaPhone,
  FaRegImage,
  FaComment,
} from "react-icons/fa";
import Input from "../../atoms/form/Input.astro";
import Textarea from "../../atoms/form/Textarea.astro";
import ButtonCta from "../../atoms/ButtonCta.astro";
import GoogleMap from "../../atoms/GoogleMap.astro";

interface Props {
  lang: "en" | "es";
  pageKey: string;
}

const { lang, pageKey } = Astro.props;
const t = useTranslations(lang);

const contactInfo = t("global.footer.columns.contact");
const contactCards = t("pages.contact.cards");

const contactCardsList = [
  {
    Icon: FaPhone,
    title: contactCards.usa.title,
    text: contactCards.usa.text,
    variant: "white",
    href: "tel:+19299991258",
  },
  {
    Icon: FaPhone,
    title: contactCards.mexico.title,
    text: contactCards.mexico.text,
    variant: "orange",
    href: "tel:+529983870435",
  },
  {
    Icon: FaEnvelope,
    title: contactCards.email.title,
    text: contactCards.email.text,
    variant: "black",
    href: "mailto:bookings@gotransfers.us",
  },
] as const;

const formFields = [
  {
    name: "name",
    type: "text",
    icon: FaUser,
    label: t("pages.contact.form.name.label"),
    placeholder: t("pages.contact.form.name.placeholder"),
    required: true,
    colSpan: 1,
  },
  {
    name: "email",
    type: "email",
    icon: FaEnvelope,
    label: t("pages.contact.form.email.label"),
    placeholder: t("pages.contact.form.email.placeholder"),
    required: true,
    colSpan: 1,
  },
  {
    name: "phone",
    type: "tel",
    icon: FaPhone,
    label: t("pages.contact.form.phone.label"),
    placeholder: t("pages.contact.form.phone.placeholder"),
    required: true,
    colSpan: 1,
  },
  {
    name: "subject",
    type: "text",
    icon: FaRegImage,
    label: t("pages.contact.form.subject.label"),
    placeholder: t("pages.contact.form.subject.placeholder"),
    required: true,
    colSpan: 1,
  },
  {
    name: "message",
    type: "textarea",
    icon: FaComment,
    label: t("pages.contact.form.message.label"),
    placeholder: t("pages.contact.form.message.placeholder"),
    required: true,
    colSpan: 2,
  },
];
---

<Layout pageKey={pageKey}>
  <PageSEO currentPage="contact" slot="seo" />

  <div class="container">
    <SectionHeading
      title={t("pages.contact.title")}
      isH1
      class="mt-12 text-center"
    >
      <p class="text-lg">
        {t("pages.contact.description")}
      </p>
    </SectionHeading>

    <div
      class="form-wrapper bg-gray-light mt-6 flex flex-col items-center gap-12 rounded-2xl p-8 shadow-sm lg:flex-row"
    >
      <SectionHeading
        title={t("pages.contact.stayInTouch.title")}
        class="w-full lg:w-1/3"
      >
        <p class="text-lg">
          {t("pages.contact.stayInTouch.description")}
        </p>
      </SectionHeading>

      <form
        class="my-6 grid w-full grid-cols-1 gap-6 rounded-2xl bg-white p-8 lg:w-2/3 lg:grid-cols-2"
      >
        {
          formFields.map((field) => {
            return (
              <div
                class={
                  field.colSpan === 2
                    ? "col-span-1 lg:col-span-2" // simplified spacing
                    : "col-span-1"
                }
              >
                {field.type === "textarea" ? (
                  <Textarea
                    name={field.name}
                    label={field.label}
                    placeholder={field.placeholder}
                    required={field.required}
                    icon={field.icon}
                  />
                ) : (
                  <Input
                    name={field.name}
                    label={field.label}
                    type={field.type as any}
                    placeholder={field.placeholder}
                    required={field.required}
                    icon={field.icon}
                  />
                )}
              </div>
            );
          })
        }
        <div class="col-span-1 lg:col-span-2">
          <ButtonCta type="submit" class="w-full! md:w-auto">
            {t("pages.contact.form.submit")}
          </ButtonCta>
        </div>
      </form>
    </div>
  </div>

  <section class="container mt-12">
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-3">
      {
        contactCardsList.map((card) => (
          <BasicIconCard
            Icon={card.Icon}
            title={card.title}
            text={card.text}
            variant={card.variant as any}
            href={card.href}
            class="w-full"
          />
        ))
      }
    </div>
  </section>

  <div
    class="border-gray-light container my-12 h-[450px] w-full overflow-hidden rounded-2xl border bg-white shadow-sm"
  >
    <GoogleMap />
  </div>
</Layout>
