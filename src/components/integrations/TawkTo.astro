---
const propertyId = import.meta.env.PUBLIC_TAWK_PROPERTY_ID;
const widgetId = import.meta.env.PUBLIC_TAWK_WIDGET_ID;

// Don't render if creds are missing (e.g. valid safeguard)
if (!propertyId || !widgetId) {
  return;
}
---

<script is:inline define:vars={{ propertyId, widgetId }}>
  // Ensure the Tawk_API and Tawk_LoadStart are defined in the global window scope
  // This is critical because define:vars wraps this script in a local scope.
  window.Tawk_API = window.Tawk_API || {};
  window.Tawk_LoadStart = new Date();

  (function () {
    var s1 = document.createElement("script"),
      s0 = document.getElementsByTagName("script")[0];
    s1.async = true;
    s1.src = "https://embed.tawk.to/" + propertyId + "/" + widgetId;
    s1.charset = "UTF-8";
    s1.setAttribute("crossorigin", "*");
    s0.parentNode.insertBefore(s1, s0);
  })();
</script>
