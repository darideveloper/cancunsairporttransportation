---
import { useTranslations, getLangFromUrl } from "../../lib/i18n/utils";
import SectionHeading from "../molecules/SectionHeading.astro";
import InfoIconCard from "../molecules/InfoIconCard.astro";
import { FaPlane, FaBed, FaUtensils, FaTree } from "react-icons/fa";
import { marked } from "marked";

interface Props {
  contentKey?: string;
}

const { contentKey = "home" } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const serviceKeys = [
  { key: "airportToHotel", Icon: FaPlane },
  { key: "hotelToHotel", Icon: FaBed },
  { key: "hotelToRestaurant", Icon: FaUtensils },
  { key: "hotelToPark", Icon: FaTree },
];

const services = serviceKeys.map(({ key, Icon }) => {
  const pageTitle = t(
    `pages.${contentKey}.transportationServices.items.${key}.title`,
  );
  const globalTitle = t(
    `global.sections.transportationServicesList.items.${key}.title`,
  );

  return {
    title: pageTitle || globalTitle,
    text: t(`pages.${contentKey}.transportationServices.items.${key}.text`),
    Icon,
  };
});

const title = t(`pages.${contentKey}.transportationServices.title`);
const description = t(`pages.${contentKey}.transportationServices.description`);
const id = "transportation-services";
---

<section
  class="relative container mx-auto mt-12 px-4 py-12"
  id={id}
  aria-label={title}
>
  <div
    class="absolute top-0 left-1/2 -z-10 h-[60%] w-screen -translate-x-1/2 bg-[#fff9f2]"
  >
  </div>

  <div class="mb-8 flex flex-col items-center justify-center text-center">
    <div class="flex flex-col items-center justify-center gap-6">
      <SectionHeading title={title} class="font-bolder text-center">
        {
          description && (
            <div
              set:html={marked.parse(description)}
              class="markdown text-gray mt-4 text-justify text-sm md:text-left"
            />
          )
        }
      </SectionHeading>
    </div>
  </div>

  <div
    class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"
  >
    {
      services.map((item) => (
        <InfoIconCard
          title={item.title}
          text={item.text}
          BottomIcon={item.Icon}
          class="bg-white"
        />
      ))
    }
  </div>
</section>
