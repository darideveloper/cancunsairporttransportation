---
// Libs
import { getLangFromUrl, useTranslations } from '../../lib/i18n/utils'

// Components
import TripTypeControls from '../molecules/booking/TripTypeControls'
import CurrencyControls from '../molecules/booking/CurrencyControls'
import SubmitButton from '../molecules/booking/SubmitButton'
import BookingFields from './BookingFields'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
const translations = t('booking')

interface Props {
  defaultFrom?: string
  defaultTo?: string
  title?: string
  class?: string
}

const { defaultFrom, defaultTo, title, class: className } = Astro.props
---

<section class={`w-full flex justify-center ${className} container`}>
  <form class='px-8 py-6 bg-accent rounded-xl'>
    {
      title && (
        <h1 class='text-3xl font-bold text-center mb-4 text-balance'>
          {title}
        </h1>
      )
    }
    <!-- Controls -->
    <header class='text-sm flex w-full justify-between gap-4'>
      <TripTypeControls
        labels={translations.tripType}
        client:load
      />
      <CurrencyControls
        labels={translations.currency}
        client:load
      />
      <SubmitButton
        label={translations.submit}
        client:load
        className='hidden md:block'
      />
    </header>
    <!-- Fields -->
    <BookingFields
      translations={translations}
      defaultFrom={defaultFrom}
      defaultTo={defaultTo}
      client:load
    />
    <footer>
      <SubmitButton
        label={translations.submit}
        client:load
        className='block md:hidden w-full mt-4'
      />
    </footer>
  </form>
</section>
