---
import { useTranslations } from "../../lib/i18n/utils";
import SectionHeading from "../molecules/SectionHeading.astro";
import InfoIconCard from "../molecules/InfoIconCard.astro";
import { FaMapMarkerAlt } from "react-icons/fa";

const { lang } = Astro.params as { lang: string };
const t = useTranslations(lang as "en" | "es");

const contactItems = [
  {
    title: t("global.locations.contacts.usaCanada.label"),
    text: t("global.locations.contacts.usaCanada.value"),
    Icon: FaMapMarkerAlt,
    href: `tel:${t("global.locations.contacts.usaCanada.value").replace(/[^0-9+]/g, "")}`,
  },
  {
    title: t("global.locations.contacts.mexicoRest.label"),
    text: t("global.locations.contacts.mexicoRest.value"),
    Icon: FaMapMarkerAlt,
    href: `tel:${t("global.locations.contacts.mexicoRest.value").replace(/[^0-9+]/g, "")}`,
  },
  {
    title: t("global.locations.contacts.address.label"),
    text: t("global.locations.contacts.address.value"),
    Icon: FaMapMarkerAlt,
  },
];

const transportationTimes = t(
  "global.locations.transportationTimes.items",
) as Array<{
  id: string;
  title: string;
  text: string;
  bottomText: string;
}>;
---

<section
  class="container mx-auto px-4 py-16"
  id="locations"
  aria-label={t("global.locations.title")}
>
  <div class="mb-12 text-center">
    <SectionHeading title={t("global.locations.title")} />
  </div>

  <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
    {
      contactItems.map((item) => (
        <InfoIconCard
          title={item.title}
          text={item.text}
          TitleIcon={item.Icon}
          href={item.href}
          class="bg-gray-light"
        />
      ))
    }
  </div>

  <div class="bg-gray/10 rounded-2xl">
    <div
      class="border-gray-light my-6 h-[450px] w-full overflow-hidden rounded-t-2xl border shadow-sm"
    >
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3721.5966047271118!2d-86.85725502440039!3d21.12864288433976!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f4c2bb0419c6491%3A0x145800cb5703a989!2sCancun%20Airport%20Transportation!5e0!3m2!1ses-419!2smx!4v1721079619885!5m2!1ses-419!2smx"
        width="100%"
        height="100%"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        title={t("global.locations.title")}
        aria-label={t("global.locations.title")}></iframe>
    </div>

    <SectionHeading
      title={t("global.locations.transportationTimes.title")}
      class="mt-2 text-center"
    />
    <div class="grid grid-cols-1 gap-4 p-4 md:grid-cols-2 lg:grid-cols-4">
      {
        transportationTimes.map((item) => (
          <InfoIconCard
            title={item.title}
            text={item.text}
            bottomText={item.bottomText}
            BottomIcon={FaMapMarkerAlt}
            class="bg-white"
          />
        ))
      }
    </div>
  </div>
</section>
