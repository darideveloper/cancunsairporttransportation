---
import { useTranslations } from "../../lib/i18n/utils";
import SectionHeading from "../molecules/SectionHeading.astro";
import InfoIconCard from "../molecules/InfoIconCard.astro";
import { FaPhoneAlt, FaMapMarkerAlt, FaClock } from "react-icons/fa";

const { lang } = Astro.params as { lang: string };
const t = useTranslations(lang as "en" | "es");

const contactItems = [
  {
    title: t("locations.contacts.usaCanada.label"),
    text: t("locations.contacts.usaCanada.value"),
    Icon: FaMapMarkerAlt,
    href: `tel:${t("locations.contacts.usaCanada.value").replace(/[^0-9+]/g, "")}`,
  },
  {
    title: t("locations.contacts.mexicoRest.label"),
    text: t("locations.contacts.mexicoRest.value"),
    Icon: FaMapMarkerAlt,
    href: `tel:${t("locations.contacts.mexicoRest.value").replace(/[^0-9+]/g, "")}`,
  },
  {
    title: t("locations.contacts.address.label"),
    text: t("locations.contacts.address.value"),
    Icon: FaMapMarkerAlt,
  },
];

const transportationTimes = t("locations.transportationTimes.items") as Array<{
  id: string;
  title: string;
  text: string;
  buttomText: string;
}>;
---

<section
  class="container mx-auto px-4 py-16"
  id="locations"
  aria-label={t("locations.title")}
>
  <div class="mb-12 text-center">
    <SectionHeading title={t("locations.title")} />
  </div>

  <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
    {
      contactItems.map((item) => (
        <InfoIconCard
          title={item.title}
          text={item.text}
          TitleIcon={item.Icon}
          href={item.href}
        />
      ))
    }
  </div>

  <div
    class="my-6 h-[450px] w-full overflow-hidden rounded-2xl border border-gray-100 shadow-sm"
  >
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3721.5966047271118!2d-86.85725502440039!3d21.12864288433976!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f4c2bb0419c6491%3A0x145800cb5703a989!2sCancun%20Airport%20Transportation!5e0!3m2!1ses-419!2smx!4v1721079619885!5m2!1ses-419!2smx"
      width="100%"
      height="100%"
      style="border:0;"
      allowfullscreen=""
      loading="lazy"
      title={t("locations.title")}
      aria-label={t("locations.title")}></iframe>
  </div>

  <div class="mt-20">
    <div class="mb-12 text-center">
      <SectionHeading title={t("locations.transportationTimes.title")} />
    </div>
    <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4">
      {
        transportationTimes.map((item) => (
          <InfoIconCard
            title={item.title}
            text={item.text}
            buttomText={item.buttomText}
            BottomIcon={FaClock}
          />
        ))
      }
    </div>
  </div>
</section>
